# ResuBoost AI Backend - Staging Environment Configuration
# Copy this file to .env for staging deployment

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=ResuBoost AI
APP_VERSION=2.0.0-staging
DEBUG=false

# =============================================================================
# Database Configuration
# =============================================================================
# For staging, use PostgreSQL (production-like)
DATABASE_URL=postgresql://resuboost:${DB_PASSWORD}@db:5432/resuboost_staging
# SQLite fallback for simpler staging
# DATABASE_URL=sqlite:///./data/resume_ai_staging.db

# =============================================================================
# Security - MUST BE SET VIA ENVIRONMENT VARIABLES
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=${SECRET_KEY}
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie Security (HTTPS enabled in staging)
COOKIE_HTTPONLY=true
COOKIE_SECURE=true
COOKIE_SAMESITE=lax
COOKIE_DOMAIN=.resuboost.ai

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Options: openai, anthropic, google, ollama, mock
LLM_PROVIDER=openai
LLM_REQUEST_TIMEOUT=60

# OpenAI (set via secrets)
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_MODEL=gpt-4o-mini

# Anthropic (alternative)
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
ANTHROPIC_MODEL=claude-3-haiku-20240307

# Google (alternative)
GOOGLE_API_KEY=${GOOGLE_API_KEY}
GOOGLE_MODEL=gemini-1.5-flash

# =============================================================================
# Rate Limiting
# =============================================================================
# General API
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Auth endpoints (stricter)
AUTH_RATE_LIMIT_REQUESTS=5
AUTH_RATE_LIMIT_WINDOW=60

# AI endpoints
AI_RATE_LIMIT_REQUESTS=20
AI_RATE_LIMIT_WINDOW=60

# Brute force protection
AUTH_MAX_RECENT_FAILURES=5
AUTH_RATE_LIMIT_WINDOW_MINUTES=15
AUTH_LOCKOUT_THRESHOLD=10

# =============================================================================
# File Upload Limits
# =============================================================================
MAX_FILE_SIZE_MB=10
MAX_RESUME_LENGTH=100000

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ORIGINS=["https://staging.resuboost.ai","https://api-staging.resuboost.ai"]

# =============================================================================
# Security Middleware
# =============================================================================
ENABLE_RATE_LIMITING=true
ENABLE_SECURITY_HEADERS=true
ENABLE_INPUT_SANITIZATION=true
ENABLE_AUDIT_LOGGING=true
ENABLE_FILE_AUDIT_LOGGING=true
AUDIT_DATABASE_PATH=data/audit_staging.db
AUDIT_LOG_FILE_PATH=logs/audit_staging.log

# HSTS (HTTP Strict Transport Security)
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000

# =============================================================================
# Background Scheduler
# =============================================================================
ENABLE_SCHEDULER=true
SCHEDULER_DEFAULT_INTERVAL_MINUTES=60

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
